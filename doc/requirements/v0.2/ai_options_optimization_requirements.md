# `gitie` AI 选项优化产品需求文档

## 1. 背景与需求概述

当前 `gitie` 工具通过 `--ai` 标志启用 AI 功能，用户需要显式添加此标志才能使用 AI 能力。根据用户反馈和实际使用情况，我们发现大多数用户使用 `gitie` 的主要目的是利用其 AI 功能。因此，为了提高用户体验并简化命令行操作，我们计划优化 AI 选项的使用方式。

## 2. 需求详情

### 2.1 核心变更

1. **默认启用 AI 功能**：
   - 当用户执行 `gitie` 命令时，默认启用 AI 逻辑，无需显式添加 `--ai` 标志
   - 所有当前使用 `--ai` 参数的用例将保持不变的功能，但用户无需添加此参数

2. **添加 `--noai` 选项**：
   - 添加新的 `--noai` 命令行选项，允许用户显式禁用 AI 功能
   - 当用户指定 `--noai` 时，`gitie` 将回退到标准的 Git 操作，不使用任何 AI 功能

### 2.2 行为对比

| 当前行为 | 优化后行为 |
|----------|------------|
| `gitie commit` → 标准 Git commit | `gitie commit` → 使用 AI 生成提交信息 |
| `gitie commit --ai` → 使用 AI 生成提交信息 | `gitie commit` → 使用 AI 生成提交信息 |
| `gitie status` → 标准 Git status | `gitie status` → AI 解释 status 结果 |
| `gitie status --ai` → AI 解释 status 结果 | `gitie status --noai` → 标准 Git status |
| `gitie --ai log --oneline` → AI 解释 log 命令 | `gitie log --oneline` → AI 解释 log 命令 |

### 2.3 具体实现逻辑

1. **参数处理与优先级**：
   - 首先检查命令行参数中是否存在 `--noai`
   - 如果存在 `--noai`，移除此参数并执行标准 Git 操作
   - 如果不存在 `--noai`，默认按照当前 `--ai` 的逻辑执行

2. **兼容性保障**：
   - 保持对现有 `--ai` 标志的支持，以确保向后兼容性
   - 文档中应明确说明此更改，帮助用户理解新的默认行为

3. **帮助文本更新**：
   - 更新所有相关帮助文本，明确说明 AI 功能默认启用
   - 解释 `--noai` 选项的用途和使用方法

## 3. 用户体验提升

此优化将带来以下用户体验改进：

1. **简化命令行操作**：减少用户需要输入的字符数，特别是对于频繁使用 AI 功能的用户
2. **符合用户预期**：大多数用户安装 `gitie` 的目的是使用其 AI 功能，默认启用更符合预期
3. **保留选择权**：通过 `--noai` 选项，仍然允许用户在需要时回退到标准 Git 行为

## 4. 后续计划

1. **监控指标**：
   - 跟踪 `--noai` 选项的使用频率，评估用户对默认 AI 行为的接受度
   - 收集用户反馈，特别是关于默认行为变更的反馈

2. **文档与传达**：
   - 在 README 和帮助文档中明确说明此变更
   - 考虑在首次运行时提示用户关于默认行为的变化

## 5. 开发与发布计划

1. **开发**：在单独的分支上进行开发，以便于代码审查和测试
2. **测试**：全面测试所有现有功能，确保行为变更符合预期
3. **发布**：作为小版本更新发布，并在发布说明中强调此变更